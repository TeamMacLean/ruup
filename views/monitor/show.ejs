<% include ../head.ejs %>

<div class="container">

    <h1 class="center"><%- monitor.name %></h1>

    <% if(graph && graph.data.length > 1){ %>
    <div class="graph" id="graph"></div>
    <script src="/components/chartist/dist/chartist.min.js"></script>
    <script src="/components/chartist-plugin-tooltip/dist/chartist-plugin-tooltip.min.js"></script>
    <link href="/components/chartist/dist/chartist.min.css" rel="stylesheet">
    <link href="/components/chartist-plugin-tooltip/dist/chartist-plugin-tooltip.css" rel="stylesheet">
    <script>

        var graphData = JSON.parse('<%- JSON.stringify(graph) %>');


        new Chartist.Line('#graph', {
            labels: graphData.labels,
            series: [
                graphData.data
            ]
        }, {
            low: 0,
            showArea: true,
            fullWidth: true,
            axisX: {
                showGrid: false,
                offset: 0
            },
            axisY: {
                showGrid: false,
                offset: 0
            },
            plugins: [
                Chartist.plugins.tooltip({
                    appendToBody: true
                })
            ]
        });


    </script>
    <% } else { %>
    <p>Not enough data has been collected to display a graph, please check back in 5 minutes.</p>
    <% } %>

    <div class="form-group">
        <p>Alert emails will go to <%- monitor.email %></p>
    </div>

    <div class="form-group">
        <img src="/site/<%- monitor.id %>/badge/uppercent">
        <img src="/site/<%- monitor.id %>/badge/avgresponse">
        <img src="/site/<%- monitor.id %>/badge/status">
    </div>

</div>

<% include ../foot.ejs %>